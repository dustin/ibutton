# Makefile for the mlan library
#
# Copyright (c) 1999  Dustin Sallings <dustin@spy.net>
#
# $Id: Makefile.in,v 1.15 2001/12/11 09:49:04 dustin Exp $

SHELL=/bin/sh
AR=@AR@
RANLIB=@RANLIB@
GUILECONF=@GUILECONF@

DEFS=@DEFS@
CFLAGS=-I. @CFLAGS@ `$(GUILECONF) compile` $(DEFS)

OBJ=com.o ds2480.o mlan.o devices.o ds1920.o ds1921.o ds2406.o ds2438.o
PROGS=search lookup sample_devices slew 1921dump 1921mission \
	1920 storage 2406 2438 @GUILESTUFF@
PROGO=search.o lookup.o sample_devices.o slew.o
CC=@CC@

all: $(PROGS)

slew: mlan.a slew.o
	$(CC) -o $@ slew.o mlan.a

sample_devices: mlan.a sample_devices.o
	$(CC) -o $@ sample_devices.o mlan.a

search: mlan.a search.o
	$(CC) -o $@ search.o mlan.a

lookup: mlan.a lookup.o
	$(CC) -o $@ lookup.o mlan.a

storage: mlan.a storage.o
	$(CC) -o $@ storage.o mlan.a

1920: mlan.a 1920.o ds1920.h
	$(CC) -o $@ 1920.o mlan.a

2406: mlan.a 2406.o ds2406.h
	$(CC) -o $@ 2406.o mlan.a

2438: mlan.a 2438.o ds2438.h
	$(CC) -o $@ 2438.o mlan.a

1921dump: mlan.a 1921dump.o ds1921.h
	$(CC) -o $@ 1921dump.o mlan.a

1921mission: mlan.a 1921mission.o ds1921.h
	$(CC) -o $@ 1921mission.o mlan.a

mlanscm: mlanscm.o mlan.a
	$(CC) -g -o $@ mlanscm.o mlan.a $(LDFLAGS) `$(GUILECONF) link`

mlan.a: $(OBJ) mlan.h
	$(AR) rc $@ $(OBJ)
	$(RANLIB) $@

com.o: mlan.h ds1920.h ds1921.h

ds2480.o: mlan.h ds1920.h ds1921.h

mlan.o: mlan.h ds1920.h ds1921.h commands.h ds2438.h

devices.o: mlan.h ds1920.h ds1921.h

distclean: clean
	rm -f Makefile config.cache config.status config.log

clean:
	rm -f $(OBJ) mlan.a $(PROGS) $(PROGO)
